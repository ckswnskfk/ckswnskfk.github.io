---
title: "2023.10.24 til"
excerpt: "오늘 배운 모든 내용"
categories:
  - til
tags:
  - 유닉스 커맨드
  - 햐ㅅ
last_modified_at: 2023-10-24
toc: true
---

# 유닉스 커맨드

어제에 이어 유닉스 핵심 커맨드에 대해 알아보자.

## 핵심 커맨드

### 디렉토리와 파일 만들기

- `mkdir`: 새로운 디렉토리 생성. 아규먼트로 절대 경로나 상태 경로를 쓸 수 있다. 띄어쓰기를 통해 여러개의 디렉토리를 생성할 수도 있다.
  ex) `mkdir unix_pracrice`
- `touch`: 새로운 파일 생성. 아규먼트로 절대 경로나 상태 경로를 쓸 수 있다. 띄어쓰기를 통해 여러개의 디렉토리를 생성할 수도 있다. 참고로 touch는 파일에 손을 대서 마지막 접근 시간이나 최종 수정 시간 등을 수정하는 커맨드인데, 파일이 없는 경우 새로운 파일을 생성한다.
  ex) `touch test1.txt`

### 파일 내용 살펴보기

- `cat`: 파일을 조회할 때 많이 사용함. 아규먼트로 조회할 파일의 경로를 쓴다. `cat`은 사실 concatenate의 줄임말로, 여러개의 파일을 한 번에 조회할 수도 있다. 띄어쓰기를 통해 파일명을 구분하면 된다.
  ex) `cat test1.txt test2.txt`
- `less`: 파일을 페이지 단위로 나눠서 보여준다. 위/아래 방향키로 한 줄씩 이동하거나, space나 f 키로 다음 페이지, b 키로 이전 페이지로 갈 수 있다. 대문자 G를 누르면 마지막 페이지로 이동하고, 소문자 g를 입력하면 가장 앞 페이지로 간다. q 를 눌러 `less`를 종료할 수 있다.
  ex) `less test1.txt`
- `head`: 파일의 시작 부분 10줄을 확인할 수 있다. `n` 옵션 뒤에 숫자 값을 입력하면 숫자로 입력한 줄 수만 보여준다.
  ex) `head -15 test1.txt`
- `tail`: 파일의 마지막 10줄을 확인할 수 있다. `n` 옵션 뒤에 숫자 값을 입력하면 숫자로 입력한 줄 수만 보여준다.
  ex) `tail -5 test1.txt`

### 파일과 디렉토리 옮기기 & 이름 변경하기

파일이나 디렉토리의 위치를 변경하는 것과 이름을 변경하는 것 모두 같은 커맨드를 사용한다.

- `mv`: move를 줄인 것으로, 두 개의 경로를 아규먼트로 받는다. 첫 번째 경로는 작업할 대상의 경로이고, 두 번째 경로는 이동할 목적지 혹은 변경할 이름이다.
  ex) `mv test1.txt test3.txt` `mv test3.txt ../new_directory`

여기서 두 번째 경로가 이미 존재할 경우 해당 디렉토리 안으로 이동하고, 그렇지 않으면 이름이 변경된다.

`mv` 커맨드를 사용할 때 주의할 점은 똑같은 이름의 파일이 목적지에 있을 경우, 해당 파일을 덮어써 버린다는 것이다.  
이런 상황을 방지하기 위해서는 `i` 옵션을 쓰면 된다. 같은 이름의 파일이 있다면 해당 파일을 덮어쓸 것인지 물어본다.  
안전하게 `mv` 커맨드를 사용하려면 `i` 옵션을 쓰자!  
ex) `mv -i test1.txt test2.txt`

### 디렉토리와 파일 복사 붙여넣기

- `cp`: copy의 줄임말로, 두 개의 경로를 아규먼트로 받는다. 첫 번째 경로는 복사할 대상의 경로이고, 두 번째 경로는 복사할 위치이다.
  ex) `cp test1.txt test1_copy.txt`

디렉토리를 복사하기 위해서는 `r` 옵션을 써야한다. `r`은 recursive(재귀적인) 의 줄임말이다. `cp` 커맨드가 재귀적이란 것은, 대상 디렉토리에 자식 디렉토리가 있으면 복사하고, 그 안에 또 자식 디렉토리가 있으면 복사한다는 의미이다.
ex) `cp -r new_directory new_directory_copy`

두 번째 경로가 이미 존재하는 디렉토리이면, 그 안으로 복사된고, 아니면 해당 이름을 가진 파일 혹은 디렉토리가 생성된다.

`mv` 커맨드와 비슷하게 `cp` 커맨드도 목적지에 같은 파일이 있다면 자동으로 덮어쓰게 된다. 마찬가지로 `i` 옵션으로 이런 상황을 방지할 수 있다.
ex) `cp -ri new_directory new_directory_copy`

### 디렉토리와 파일 삭제하기

- `rm`: remove의 줄임말로, 지우고자 하는 경로를 아규먼트로 주면 된다. 여러개도 가능.
  ex) `rm test1.txt test2.txt`

디렉토리를 지우기 위해서는 `r` 옵션을 사용해야 한다.  
`rm`에도 `i` 옵션이 있는데, 삭제할 것이지 확인하는 커맨드이다. 디렉토리를 대상으로 할 경우 내부 파일들을 하나하나 지울 것인지 확인한다.
ex) `rm -ri new_directory`

`f` 옵션을 쓰면 어떤 상황에서도 이 파일을 지울 것인지 확인하지 않고 그냥 지운다. 그래서 디렉토리를 지울 때는 `f` 옵션을 많이 쓴다.
ex) `rm -rf new_directory`

# vim

GUI 환경에는 파일 확장자에 따라 여러가지 텍스트 에디터를 사용할 수 있지만, CLI에서는 작동하지 않는다.
CLI 환경에서 사용할 수 있는 텍스트 에디터로 가장 보편적으로 사용되는 것이 vim 인데, 이것에 대해 알아보자.

vim에는 많은 기능과 단축기가 있다. 모든 걸 마우스 없이 키보드로 해결해야 하므로 처음에 접근이 어려울 수 있다. 핵심만 알아보자.

- `vim`: 해당 커맨드를 아규먼트 없이 실행하면 새로운 파일을 만드는 것이고, 경로를 주면 파일을 조회/수정하는 것.

vim에는 4가지 사용 모드가 있다.

![vim의 4가지 모드](/assets/images/vim-modes.png)

vim을 처음 열면 일반 모드로 열리고, 일반 모드 외에서 다른 모드로 가려면 항상 일반 모드를 거쳐야 한다. 다른 모드에서 일반 모드로 돌아갈 때는 `esc` 키를 입력하면 된다.  
다음은 일반 모드에서 다른 모드로 전환하는 커맨드이다.

- `i`: 입력 모드로 바꿀 수 있다. 하단에 insert mode 라고 뜬다.
- `v`: 비주얼 모드로 바꿀 수 있다. 하단에 visual mode 라고 뜬다.
- `:`: 명령 모드로 바꿀 수 있다.

## 텍스트 복사, 잘라내기, 붙여넣기

복사하고자 하는 곳의 시작 부분으로 이동한다. 이후 비주얼 모드로 전환하는데,

- 줄 단위로 복사하고 싶다면: 대문자 `V`. 그러면 해당 줄이 전부 선택되고, 커서를 움직이면 줄 단위로 선택이 된다.
- 글자 단위로 복사하고 싶다면: 소문자 `v`
  를 입력하면 된다.

복사하고자 하는 곳을 선택했다면 `y`를 누르면 복사가 된다.  
잘라내기는 `d`를 누르면 된다.  
붙여넣기는 `p`를 누르면 된다.

사실 더 간편한 방법이 있다. 일반 모드에서 비주얼 모드로 전환하지 않고, `yy` 를 입력하면 해당 줄이 복사가 되고, p를 누르면 붙혀넣기가 된다.

## 파일 저장, vim 종료

이번에는 커맨드 모드를 사용한다. `:`

- `w`: 파일을 저장한다. 새로운 파일의 경우 아규먼트로 파일명을 쓰면 된다.
- `q`: vim을 종료한다. 파일을 수정한 경우 오류가 나며, 수정 사항을 저장하고 싶지 않으면 `!q`를 입력하면 된다.

# git

git은 코드의 버전 관리를 할 수 있는 프로그램이다.  
버전 관리의 장점은 다음과 같다.

1. 지난 과정 확인 가능
2. 이전 버전으로 돌아갈 수 있음

버전 관리 뿐만 아니라 여러 개발자가 협업하는데 도움을 준다. 각각의 개발자가 협업한 코드를 한 군데에 합칠 수 있다.

## github

github는 git으로 관리하는 코드의 원격 저장소를 제공해주는 서비스이다.

## git의 기본 개념

### repository

저장소 라는 의미이다. 프로젝트를 위해 만든 디렉토리의 초창기 모습부터 최근 모습까지 버전별로 저장이 된다.  
이것이 바로 프로젝트 디렉토리 내부의 숨겨진 디렉토리로 `.git` 이다. 프로젝트 디렉토리 자체가 repository라고 생각할 수 있지만, 엄밀히 말하면 프로젝트의 변경사항들이 저장돼 있는 `.git` 디렉토리가 repository 이다.

### commit

작업을 하다가 현재 상태를 하나의 버전으로 남기는 동작을 `commit` 이라고 한다. 또한 그 결과물 자체도 커밋이라고 한다.  
이 커밋이 저장되는 곳이 바로 repository 이다.

### git의 작업영역 3가지

1. working directory: 작업을 하는 프로젝트 디렉토리.
2. staging area: git add를 한 파일들이 존재하는 영역.
3. repository: working directory의 변경 이력들이 저장되어 있는 영역. 즉 커밋들이 저장되는 영역.

## 핵심 커맨드

### repository 만들기

작업하고자 하는 디렉토리에서 `git init` 커맨드를 입력하면 된다. 비어있는 레파지토리가 생성된다.

### add(staging) 하기

작업 이후에 버전으로 남기기(commit) 이전에 해야할 것이 있다. 바로 변경된 파일들 중 어떤 파일을 버전에 남길 지 지정하는 작업이다.  
이런 사전 작업을 `add`로 한다. `add`는 아규먼트를 받는데, 수정된 모습을 커밋에 반영할 파일 이름을 쓰면 된다.  
디렉터리를 쓰면 디렉터리 하위 파일 전체가 스테이징 된다.
ex) `git add calculator.py`  
혹은 현재 프로젝트 디렉터리 내부의 변경된 모든 파일을 반영하고 싶으면 `git add .` 이라고 작성하면 된다.
이 작업을 스테이징이라고도 한다.

### reset(staging 취소) 하기

혹시 이미 스테이징 한 파일을 스테이징 취소하기 위해서는 `reset` 커맨드와 아규먼트로 스테이징 취소할 파일명을 쓴다.  
ex) `git reset calculator.py`

하지만 working directory의 작업 내용은 그대로 남아있다.

### commit 하기

commit은 뭔가를 행하다, 기록하다 라는 의미를 갖는다.  
`git commit`을 하면 스테이징 된 파일들이 commit 된다.

commit에 필요한 내용은 이름, 이메일, 커밋 메시지가 있는데, 커밋 메시지를 남기려면 `m` 옵션을 쓰면 된다.  
ex) `git commit -m "create calculator.py file"`  
`m` 옵션과 메시지를 작성하지 않으면 메시지를 작성할 수 있는 창이 뜬다.(macOS의 경우 vim으로)  
이렇게 메시지를 작성하면 길고 복잡한 커밋 메시지를 남길 수도 있다.

첫 커밋 시에는 한 가지 해야 할 것이 있다. git에게 자신이 누구인지 알려줘야 한다. commit은 누가 했는지도 반드시 기록해야 하기 때문이다.

#### commit 수정하기

`git commit --amend`

amend는 수정이라는 뜻으로, 가장 최신의 커밋이 선택되며 커밋 메시지를 쓸 수 있는 창이 나오며, 메시지를 입력하고 저장하면 기존 커밋이 새로운 커밋으로 바뀐다.

### config

git의 config파일을 수정하는 명령어다. 옵션에 따라 컴퓨터 전체에서 적용할 지, 현재 레파지토리에서만 적용할 지 정할 수 있다.

ex) `git config user.name "chancellor"`

### status

git이 인식하는 프로젝트 디렉토리의 현재 상태를 출력해주는 커맨드이다.

#### git의 상태

git에서 파일들은 크게 다음 2가지 상태를 가진다.

1. untracked 상태: '추적되지 않고 있는'이라는 뜻으로, 파일이 git에 의해서 그 변동사항이 전혀 추적되고 있지 않는 상태. 예를 들어, 파일을 새로 생성하고 그 파일을 한 번도 git add 해주지 않았다면 이 상태이다.
2. tracked 상태: 파일이 git에 의해 그 변동사항이 추적되고 있는 상태

그리고 tracked 상태는 다시 아래와 같은 3가지 상태로 나눌 수 있다.

1.  staged 상태: 파일의 내용이 수정되고나서, staging area에 올라와있는 상태를 staged(스테이징된, stage area에 올려진) 상태라고 한다.
2.  unmodified 상태: 현재 파일의 내용이 최신 커밋의 모습과 비교했을 때 전혀 바뀐 게 없는 상태면 그 파일은 Unmodified(수정되지 않은, 변한 게 없는) 상태다. 커밋을 하고 난 직후에는 working directory 안의 모든 파일들이 이 상태가 된다.
3.  modified 상태: 최신 커밋의 모습과 비교했을 때 조금이라도 바뀐 내용이 있는 상태면 그 파일은 Modified(수정된) 상태이다.

### help

git의 커맨드의 사용법이나 설명을 좀 더 자세히 알고 싶다면 `help` 커맨드와 아규먼트로 알고자 하는 커맨드를 쓰면 된다.
ex) `git help add`

### log

`git log` 로 지금까지 한 커밋들의 로그를 출력한다. 오래된 커밋들이 아랫쪽에 출력된다.  
각 커밋에는 커밋 아이디(해시), 커밋 한 사람, 날짜, 커밋 메시지가 출력된다.

좀 더 깔끔하게 보는 방법도 있다. `git log --pretty=oneline`. 이렇게 하면 커밋 아이디와 커밋 메세지만 나온다.

### show

각 커밋의 상세 내용을 알고 싶을때 사용한다. 커밋 아이디(해시)를 아규먼트로 전달한다.
ex) `git show 3c80224a0c8333180bbb5ddc1835b30db66540f8`  
커밋 아이디 전체를 치지 않고 앞 4자리 정도만 쳐도 된다.

### diff

두 커밋 간의 차이를 볼 수 있다. 아규먼트로 비교하고하는 커밋 두 개의 아이디(앞의 4자리)를 주면 된다.  
빨간 색이 이전 커밋의 모습이고, 초록색이 이후 커밋의 모습을 보여준다.

ex) `git diff 12gi qwh2`
